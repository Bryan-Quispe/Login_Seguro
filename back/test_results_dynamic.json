{"created": 1770854337.558729, "duration": 2.2132930755615234, "exitcode": 0, "root": "D:\\Login_Seguro\\back", "environment": {}, "summary": {"passed": 3, "skipped": 1, "total": 4, "collected": 4}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_dynamic_security.py", "type": "Module"}]}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicXSS", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicXSS::test_reflected_xss_payload_is_escaped", "type": "Coroutine", "lineno": 31}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicXSS::test_persistent_xss_check", "type": "Coroutine", "lineno": 56}]}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicCSRF", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicCSRF::test_csrf_missing_token_rejected_template", "type": "Coroutine", "lineno": 89}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicCSRF::test_csrf_with_token_example", "type": "Coroutine", "lineno": 110}]}, {"nodeid": "tests/integration/test_dynamic_security.py", "outcome": "passed", "result": [{"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicXSS", "type": "Class"}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicCSRF", "type": "Class"}]}], "tests": [{"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicXSS::test_reflected_xss_payload_is_escaped", "lineno": 31, "outcome": "passed", "keywords": ["test_reflected_xss_payload_is_escaped", "asyncio", "pytestmark", "TestDynamicXSS", "test_dynamic_security.py", "integration", "tests", "back", ""], "setup": {"duration": 0.008281799993710592, "outcome": "passed"}, "call": {"duration": 0.0530397999973502, "outcome": "passed", "stdout": "2026-02-11 18:58:55,477 - app.main - WARNING - Error de validaci\u00f3n: [{'field': 'body.username', 'message': 'Value error, Username solo puede contener letras, n\u00fameros y guiones bajos'}, {'field': 'body.email', 'message': 'value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email.'}]\n2026-02-11 18:58:55,479 - httpx - INFO - HTTP Request: POST http://test/api/auth/register \"HTTP/1.1 422 Unprocessable Entity\"\n", "log": [{"name": "app.main", "msg": "Error de validaci\u00f3n: [{'field': 'body.username', 'message': 'Value error, Username solo puede contener letras, n\u00fameros y guiones bajos'}, {'field': 'body.email', 'message': 'value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email.'}]", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Login_Seguro\\back\\app\\main.py", "filename": "main.py", "module": "main", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "validation_exception_handler", "created": 1770854335.4773426, "msecs": 477.0, "relativeCreated": 2894.6750164031982, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:55"}, {"name": "httpx", "msg": "HTTP Request: POST http://test/api/auth/register \"HTTP/1.1 422 Unprocessable Entity\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Login_Seguro\\.venv\\Lib\\site-packages\\httpx\\_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1740, "funcName": "_send_single_request", "created": 1770854335.4793444, "msecs": 479.0, "relativeCreated": 2896.676778793335, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:55"}]}, "teardown": {"duration": 0.002436100010527298, "outcome": "passed"}}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicXSS::test_persistent_xss_check", "lineno": 56, "outcome": "passed", "keywords": ["test_persistent_xss_check", "asyncio", "pytestmark", "TestDynamicXSS", "test_dynamic_security.py", "integration", "tests", "back", ""], "setup": {"duration": 0.0034642999817151576, "outcome": "passed"}, "call": {"duration": 0.010656499973265454, "outcome": "passed", "stdout": "2026-02-11 18:58:55,493 - httpx - INFO - HTTP Request: POST http://test/api/admin/users \"HTTP/1.1 403 Forbidden\"\n2026-02-11 18:58:55,498 - httpx - INFO - HTTP Request: GET http://test/api/admin/users/username/xss_test_user \"HTTP/1.1 404 Not Found\"\n", "log": [{"name": "httpx", "msg": "HTTP Request: POST http://test/api/admin/users \"HTTP/1.1 403 Forbidden\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Login_Seguro\\.venv\\Lib\\site-packages\\httpx\\_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1740, "funcName": "_send_single_request", "created": 1770854335.4933436, "msecs": 493.0, "relativeCreated": 2910.6760025024414, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:55"}, {"name": "httpx", "msg": "HTTP Request: GET http://test/api/admin/users/username/xss_test_user \"HTTP/1.1 404 Not Found\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Login_Seguro\\.venv\\Lib\\site-packages\\httpx\\_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1740, "funcName": "_send_single_request", "created": 1770854335.4983764, "msecs": 498.0, "relativeCreated": 2915.7087802886963, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:55"}]}, "teardown": {"duration": 0.0020571999775711447, "outcome": "passed"}}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicCSRF::test_csrf_missing_token_rejected_template", "lineno": 89, "outcome": "passed", "keywords": ["test_csrf_missing_token_rejected_template", "asyncio", "pytestmark", "TestDynamicCSRF", "test_dynamic_security.py", "integration", "tests", "back", ""], "setup": {"duration": 0.001972600002773106, "outcome": "passed"}, "call": {"duration": 2.038076099997852, "outcome": "passed", "stdout": "2026-02-11 18:58:57,537 - app.infrastructure.database.connection - ERROR - Error al inicializar pool de conexiones: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\n\n2026-02-11 18:58:57,537 - app.infrastructure.database.connection - ERROR - Error en operaci\u00f3n de base de datos: No se pudo conectar a la base de datos. Aseg\u00farese de que PostgreSQL est\u00e9 corriendo.\n2026-02-11 18:58:57,538 - app.application.use_cases.login_user - ERROR - Error en login: No se pudo conectar a la base de datos. Aseg\u00farese de que PostgreSQL est\u00e9 corriendo.\n2026-02-11 18:58:57,539 - httpx - INFO - HTTP Request: POST http://test/api/auth/login \"HTTP/1.1 401 Unauthorized\"\n2026-02-11 18:58:57,541 - httpx - INFO - HTTP Request: POST http://test/api/admin/disable/1 \"HTTP/1.1 403 Forbidden\"\n", "log": [{"name": "app.infrastructure.database.connection", "msg": "Error al inicializar pool de conexiones: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\n", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "D:\\Login_Seguro\\back\\app\\infrastructure\\database\\connection.py", "filename": "connection.py", "module": "connection", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 53, "funcName": "_initialize_pool", "created": 1770854337.5371082, "msecs": 537.0, "relativeCreated": 4954.440593719482, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:57"}, {"name": "app.infrastructure.database.connection", "msg": "Error en operaci\u00f3n de base de datos: No se pudo conectar a la base de datos. Aseg\u00farese de que PostgreSQL est\u00e9 corriendo.", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "D:\\Login_Seguro\\back\\app\\infrastructure\\database\\connection.py", "filename": "connection.py", "module": "connection", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 84, "funcName": "get_cursor", "created": 1770854337.5371082, "msecs": 537.0, "relativeCreated": 4954.440593719482, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:57"}, {"name": "app.application.use_cases.login_user", "msg": "Error en login: No se pudo conectar a la base de datos. Aseg\u00farese de que PostgreSQL est\u00e9 corriendo.", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "D:\\Login_Seguro\\back\\app\\application\\use_cases\\login_user.py", "filename": "login_user.py", "module": "login_user", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 131, "funcName": "execute", "created": 1770854337.538107, "msecs": 538.0, "relativeCreated": 4955.439329147339, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:57"}, {"name": "httpx", "msg": "HTTP Request: POST http://test/api/auth/login \"HTTP/1.1 401 Unauthorized\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Login_Seguro\\.venv\\Lib\\site-packages\\httpx\\_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1740, "funcName": "_send_single_request", "created": 1770854337.5391052, "msecs": 539.0, "relativeCreated": 4956.437587738037, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:57"}, {"name": "httpx", "msg": "HTTP Request: POST http://test/api/admin/disable/1 \"HTTP/1.1 403 Forbidden\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Login_Seguro\\.venv\\Lib\\site-packages\\httpx\\_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1740, "funcName": "_send_single_request", "created": 1770854337.5417278, "msecs": 541.0, "relativeCreated": 4959.060192108154, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:57"}]}, "teardown": {"duration": 0.0018042000010609627, "outcome": "passed"}}, {"nodeid": "tests/integration/test_dynamic_security.py::TestDynamicCSRF::test_csrf_with_token_example", "lineno": 110, "outcome": "skipped", "keywords": ["test_csrf_with_token_example", "asyncio", "pytestmark", "TestDynamicCSRF", "test_dynamic_security.py", "integration", "tests", "back", ""], "setup": {"duration": 0.002869200019631535, "outcome": "passed"}, "call": {"duration": 0.005980800022371113, "outcome": "skipped", "stdout": "2026-02-11 18:58:57,552 - httpx - INFO - HTTP Request: GET http://test/csrf-token \"HTTP/1.1 404 Not Found\"\n", "log": [{"name": "httpx", "msg": "HTTP Request: GET http://test/csrf-token \"HTTP/1.1 404 Not Found\"", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Login_Seguro\\.venv\\Lib\\site-packages\\httpx\\_client.py", "filename": "_client.py", "module": "_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 1740, "funcName": "_send_single_request", "created": 1770854337.5527284, "msecs": 552.0, "relativeCreated": 4970.0608253479, "thread": 21132, "threadName": "MainThread", "processName": "MainProcess", "process": 24448, "asctime": "18:58:57"}], "longrepr": "('D:\\\\Login_Seguro\\\\back\\\\tests\\\\integration\\\\test_dynamic_security.py', 126, 'Skipped: No hay endpoint /csrf-token en esta app; adapta el test')"}, "teardown": {"duration": 0.0018558000156190246, "outcome": "passed"}}]}